{"components":{"responses":{"TooManyRequests":{"content":{"application/json":{"schema":{"properties":{"error":{"description":"Error message","examples":["Rate limit exceeded for API operations"],"type":"string"}},"type":"object"}}},"description":"Too many requests - rate limit exceeded","headers":{"X-RateLimit-Limit":{"description":"The number of allowed requests in the current period","schema":{"type":"integer"}},"X-RateLimit-Remaining":{"description":"The number of remaining requests in the current period","schema":{"type":"integer"}},"X-RateLimit-Reset":{"description":"The remaining window before the rate limit resets in UTC epoch seconds","schema":{"type":"integer"}}}}},"schemas":{"CreatePaymentRequestBody":{"additionalProperties":false,"properties":{"amount":{"description":"Amount in smallest currency unit (e.g., cents)","format":"int64","minimum":1,"type":"integer"},"currency":{"description":"ISO 4217 currency code","pattern":"^[A-Z]{3}$","type":"string"},"customer_email":{"description":"Customer email address","format":"email","type":"string"},"customer_id":{"description":"Customer ID from identity system","type":"string"},"customer_name":{"description":"Customer name","type":"string"},"description":{"description":"Payment description","maxLength":500,"type":"string"},"merchant_id":{"description":"ID of the merchant receiving payment","type":"string"},"metadata":{"additionalProperties":{},"description":"Custom metadata for the payment","type":"object"},"payment_method":{"description":"Payment method type","type":"string"},"payment_method_details":{"additionalProperties":{},"description":"Payment method specific details","type":"object"}},"required":["merchant_id","amount","currency","payment_method"],"type":"object"},"DisableTwoFactorResponseBody":{"additionalProperties":false,"properties":{"enabled":{"description":"Whether two-factor authentication is enabled","type":"boolean"}},"required":["enabled"],"type":"object"},"EnableTwoFactorRequestBody":{"additionalProperties":false,"properties":{"code":{"description":"The verification code to confirm setup","examples":["123456"],"type":"string"}},"required":["code"],"type":"object"},"EnableTwoFactorResponseBody":{"additionalProperties":false,"properties":{"enabled":{"description":"Whether two-factor authentication is enabled","type":"boolean"}},"required":["enabled"],"type":"object"},"Entity":{"additionalProperties":false,"properties":{"domain":{"description":"The entity's domain","type":"string"},"id":{"description":"The entity's ID","type":"string"},"logo":{"description":"The entity's logo URL","type":"string"},"name":{"description":"The entity's name","type":"string"},"parentId":{"description":"The parent entity's ID","type":"string"},"slug":{"description":"The entity's slug","type":"string"},"status":{"description":"The entity's status","type":"string"},"type":{"description":"The entity's type","type":"string"}},"required":["id","name","slug","type","status"],"type":"object"},"EntityRole":{"additionalProperties":false,"properties":{"access":{"additionalProperties":{"items":{"type":"string"},"type":["array","null"]},"description":"The role's access to resources in the entity","type":"object"},"name":{"description":"The name of the user's role in the entity","type":"string"}},"required":["name","access"],"type":"object"},"Error":{"additionalProperties":false,"properties":{"code":{"$ref":"#/components/schemas/ErrorCode"},"errors":{"items":{"$ref":"#/components/schemas/ErrorDetail"},"type":["array","null"]},"message":{"type":"string"}},"required":["errors","message"],"type":"object"},"ErrorCode":{"description":"The standardized error code","enum":["AccountLocked","BackupCodeValidation","ConnectionNotFound","DuplicateItems","EmailExists","EmailNotVerified","EntityNotFound","FailedToVerifyTurnstileToken","InsufficientPermissions","InvalidBody","InvalidConnectionCredentials","InvalidCountry","InvalidCredentials","InvalidCurrency","InvalidCursor","InvalidDate","InvalidDateTime","InvalidEmail","InvalidFinancialAmount","InvalidHostname","InvalidIPv4","InvalidIPv6","InvalidImageFormat","InvalidName","InvalidOrExpiredToken","InvalidRefreshToken","InvalidTime","InvalidTurnstileToken","InvalidTwoFactorCode","InvalidUUID","InvalidValue","MissingLowercase","MissingNumber","MissingSpecial","MissingUppercase","PaymentNotFound","Required","TooLarge","TooLong","TooShort","TooSmall","TwoFactorAlreadyEnabled","TwoFactorLocked","TwoFactorNotEnabled","TwoFactorPending","Unauthenticated","Unknown","Unused","UserNotFound"],"type":"string"},"ErrorDetail":{"additionalProperties":false,"properties":{"code":{"$ref":"#/components/schemas/ErrorCode"},"location":{"type":"string"},"message":{"type":"string"},"metadata":{"$ref":"#/components/schemas/ErrorMetadata"}},"required":["code","message"],"type":"object"},"ErrorMetadata":{"additionalProperties":false,"properties":{"allowed_values":{"items":{"type":"string"},"type":["array","null"]},"max_length":{"format":"int64","type":"integer"},"max_value":{"format":"double","type":"number"},"min_length":{"format":"int64","type":"integer"},"min_value":{"format":"double","type":"number"},"regex":{"type":"string"}},"type":"object"},"ForgotPasswordRequestBody":{"additionalProperties":false,"properties":{"cfTurnstileToken":{"description":"The Cloudflare Turnstile token","examples":["XXX.DUMMY.TOKEN"],"type":"string"},"email":{"description":"The user's email address","examples":["user@example.com"],"format":"email","type":"string"}},"required":["cfTurnstileToken","email"],"type":"object"},"GetAllSessionsResponseBody":{"additionalProperties":false,"properties":{"sessions":{"description":"The current active user sessions","items":{"$ref":"#/components/schemas/Session"},"type":["array","null"]}},"required":["sessions"],"type":"object"},"InitiateRefundRequestBody":{"additionalProperties":false,"properties":{"amount":{"description":"Amount to refund in smallest currency unit","format":"int64","minimum":1,"type":"integer"},"metadata":{"additionalProperties":{},"description":"Custom metadata for the refund","type":"object"},"payment_id":{"description":"ID of the payment to refund","type":"string"},"reason":{"description":"Reason for the refund","type":"string"},"reason_description":{"description":"Additional details about the refund reason","maxLength":500,"type":"string"}},"required":["payment_id","amount","reason"],"type":"object"},"ListPaymentsResponseBody":{"additionalProperties":false,"properties":{"limit":{"format":"int64","type":"integer"},"offset":{"format":"int64","type":"integer"},"payments":{"items":{"$ref":"#/components/schemas/Payment"},"type":["array","null"]},"total":{"format":"int64","type":"integer"}},"required":["payments","total","limit","offset"],"type":"object"},"ListRefundsResponseBody":{"additionalProperties":false,"properties":{"limit":{"format":"int64","type":"integer"},"offset":{"format":"int64","type":"integer"},"refunds":{"items":{"$ref":"#/components/schemas/Refund"},"type":["array","null"]},"total":{"format":"int64","type":"integer"}},"required":["refunds","total","limit","offset"],"type":"object"},"MeResponseBody":{"additionalProperties":false,"properties":{"activeEntity":{"$ref":"#/components/schemas/Entity","description":"The currently active entity"},"entityRole":{"$ref":"#/components/schemas/EntityRole","description":"The permissions for the currently active entity"},"isTwoFactorPending":{"description":"Whether two-factor authentication is pending","type":"boolean"},"user":{"$ref":"#/components/schemas/SessionUser","description":"The user object"}},"required":["isTwoFactorPending","user"],"type":"object"},"Membership":{"additionalProperties":false,"properties":{"entity":{"$ref":"#/components/schemas/Entity","description":"The entity details"},"entityId":{"description":"The entity ID","type":["string","null"]},"id":{"description":"The membership ID","type":"string"},"role":{"description":"The user's role in the entity","type":"string"}},"required":["id","entityId","role","entity"],"type":"object"},"Payment":{"additionalProperties":false,"properties":{"amount":{"format":"int64","type":"integer"},"cancelled_at":{"format":"date-time","type":"string"},"created_at":{"format":"date-time","type":"string"},"currency":{"type":"string"},"customer_email":{"type":"string"},"customer_id":{"type":"string"},"customer_name":{"type":"string"},"description":{"type":"string"},"external_payment_id":{"type":"string"},"failed_at":{"format":"date-time","type":"string"},"id":{"type":"string"},"idempotency_key":{"type":"string"},"initiated_at":{"format":"date-time","type":"string"},"merchant_id":{"type":"string"},"metadata":{"additionalProperties":{},"type":"object"},"payment_method":{"type":"string"},"payment_method_details":{"additionalProperties":{},"type":"object"},"processed_at":{"format":"date-time","type":"string"},"provider_error_code":{"type":"string"},"provider_error_message":{"type":"string"},"provider_response":{"additionalProperties":{},"type":"object"},"refund_count":{"format":"int64","type":"integer"},"refundable_amount":{"format":"int64","type":"integer"},"refunded_amount":{"format":"int64","type":"integer"},"status":{"type":"string"},"updated_at":{"format":"date-time","type":"string"}},"required":["id","merchant_id","idempotency_key","amount","currency","status","payment_method","payment_method_details","metadata","provider_response","refunded_amount","refundable_amount","refund_count","initiated_at","created_at","updated_at"],"type":"object"},"Refund":{"additionalProperties":false,"properties":{"amount":{"format":"int64","type":"integer"},"cancelled_at":{"format":"date-time","type":"string"},"created_at":{"format":"date-time","type":"string"},"currency":{"type":"string"},"external_refund_id":{"type":"string"},"failed_at":{"format":"date-time","type":"string"},"id":{"type":"string"},"idempotency_key":{"type":"string"},"initiated_at":{"format":"date-time","type":"string"},"initiated_by":{"type":"string"},"initiated_by_email":{"type":"string"},"metadata":{"additionalProperties":{},"type":"object"},"payment_id":{"type":"string"},"processed_at":{"format":"date-time","type":"string"},"provider_error_code":{"type":"string"},"provider_error_message":{"type":"string"},"provider_response":{"additionalProperties":{},"type":"object"},"reason":{"type":"string"},"reason_description":{"type":"string"},"status":{"type":"string"},"updated_at":{"format":"date-time","type":"string"}},"required":["id","payment_id","idempotency_key","amount","currency","status","reason","metadata","provider_response","initiated_at","created_at","updated_at"],"type":"object"},"RegenerateQRCodeResponseBody":{"additionalProperties":false,"properties":{"qr_code":{"description":"The QR code for scanning with authenticator apps","type":"string"}},"required":["qr_code"],"type":"object"},"ResetPasswordRequestBody":{"additionalProperties":false,"properties":{"newPassword":{"description":"The new password","examples":["NewStrongPass123!"],"type":"string"},"token":{"description":"The password reset token","examples":["abc123"],"format":"uuid","type":"string"}},"required":["token","newPassword"],"type":"object"},"Session":{"additionalProperties":false,"properties":{"country":{"description":"The last seen IP country","type":["string","null"]},"createdAt":{"description":"The session creation time","format":"date-time","type":"string"},"current":{"description":"Whether this is the user's current session","type":"boolean"},"id":{"description":"The session ID","type":"string"},"ipAddress":{"description":"The last seen IP address","type":["string","null"]},"updatedAt":{"description":"The session's last activity time","format":"date-time","type":"string"},"userAgent":{"description":"The last seen user agent","type":["string","null"]},"userId":{"description":"The user's ID","type":"string"}},"required":["id","userId","current","ipAddress","country","userAgent","createdAt","updatedAt"],"type":"object"},"SessionUser":{"additionalProperties":false,"properties":{"email":{"description":"The user's email address","type":"string"},"id":{"description":"The user's ID","type":"string"},"image":{"description":"The user's profile image URL","type":"string"},"isTwoFactorEnabled":{"description":"Whether two-factor authentication is enabled","type":"boolean"},"isVerified":{"description":"Whether the user's email is verified","type":"boolean"},"lastActiveAt":{"description":"The user's last activity time","format":"date-time","type":"string"},"lastLoggedInAt":{"description":"The user's last login time","format":"date-time","type":"string"},"memberships":{"description":"The user's entity memberships","items":{"$ref":"#/components/schemas/Membership"},"type":["array","null"]},"name":{"description":"The user's name","type":"string"},"sessionExpiresAt":{"description":"When the current session will expire","format":"date-time","type":"string"}},"required":["id","email","name","isVerified","isTwoFactorEnabled","sessionExpiresAt"],"type":"object"},"SetupTwoFactorResponseBody":{"additionalProperties":false,"properties":{"backupCodes":{"description":"The backup codes for account recovery","items":{"type":"string"},"type":["array","null"]},"qrCode":{"description":"The QR code for scanning with authenticator apps","type":"string"},"secret":{"description":"The TOTP secret key","type":"string"}},"required":["secret","backupCodes","qrCode"],"type":"object"},"SignInRequestBody":{"additionalProperties":false,"properties":{"cfTurnstileToken":{"description":"The Cloudflare Turnstile token","examples":["XXX.DUMMY.TOKEN"],"type":"string"},"email":{"description":"The user's email address","examples":["john_doe@example.com"],"format":"email","type":"string"},"password":{"description":"The user's password","examples":["password123"],"type":"string"}},"required":["cfTurnstileToken","email","password"],"type":"object"},"SignInResponseBody":{"additionalProperties":false,"properties":{"isTwoFactorPending":{"description":"Whether two-factor authentication is pending","type":"boolean"}},"required":["isTwoFactorPending"],"type":"object"},"SignUpRequestBody":{"additionalProperties":false,"properties":{"cfTurnstileToken":{"description":"The Cloudflare Turnstile token","examples":["XXX.DUMMY.TOKEN"],"type":"string"},"email":{"description":"The user's email address","examples":["user@example.com"],"format":"email","type":"string"},"name":{"description":"The user's full name","examples":["John Doe"],"maxLength":100,"minLength":2,"type":"string"},"password":{"description":"The user's password","examples":["StrongPass123!"],"type":"string"}},"required":["cfTurnstileToken","email","name","password"],"type":"object"},"UpdatePasswordRequestBody":{"additionalProperties":false,"properties":{"currentPassword":{"description":"The current password","examples":["CurrentPass123!"],"type":"string"},"newPassword":{"description":"The new password","examples":["NewStrongPass123!"],"type":"string"}},"required":["currentPassword","newPassword"],"type":"object"},"UpdatePaymentStatusRequestBody":{"additionalProperties":false,"properties":{"external_payment_id":{"description":"External payment ID from provider","type":"string"},"provider_error_code":{"description":"Provider error code","type":"string"},"provider_error_message":{"description":"Provider error message","type":"string"},"provider_response":{"additionalProperties":{},"description":"Provider response data","type":"object"},"status":{"description":"New payment status","type":"string"}},"required":["status"],"type":"object"},"UpdateUserRequestBody":{"additionalProperties":false,"properties":{"name":{"description":"The user's full name","examples":["John Doe"],"maxLength":100,"minLength":2,"type":"string"}},"required":["name"],"type":"object"},"User":{"additionalProperties":false,"properties":{"createdAt":{"format":"date-time","type":"string"},"email":{"type":"string"},"emailVerifiedAt":{"format":"date-time","type":"string"},"id":{"type":"string"},"image":{"type":"string"},"lastActiveAt":{"format":"date-time","type":"string"},"lastLoggedInAt":{"format":"date-time","type":"string"},"name":{"type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["createdAt","updatedAt"],"type":"object"},"VerifyEmailRequestBody":{"additionalProperties":false,"properties":{"token":{"description":"The verification token","format":"uuid","type":"string"}},"required":["token"],"type":"object"},"VerifyPasswordRequestBody":{"additionalProperties":false,"properties":{"password":{"description":"The current password to verify","examples":["current-password"],"type":"string"}},"required":["password"],"type":"object"},"VerifyPasswordResponseBody":{"additionalProperties":false,"properties":{"verified":{"description":"Whether the password was verified successfully","type":"boolean"}},"required":["verified"],"type":"object"},"VerifyTwoFactorRequestBody":{"additionalProperties":false,"properties":{"code":{"description":"The two-factor authentication code","examples":["123456"],"type":"string"}},"required":["code"],"type":"object"}},"securitySchemes":{"API Key Authentication":{"description":"API key authentication using X-Api-Key header","in":"header","name":"X-Api-Key","type":"apiKey"}},"x-rate-limiting":{"private":{"description":"Rate limits for authenticated endpoints","rate":{"requests":300,"window":"1 minute"},"scope":"by IP address and endpoint"},"public":{"description":"Rate limits for public endpoints that don't require authentication","rate":{"requests":30,"window":"5 minutes"},"scope":"by IP address"}}},"info":{"description":"The Autopilot Platform API provides a comprehensive suite of endpoints.","title":"Autopilot API","version":"1.0.0"},"openapi":"3.1.0","paths":{"/v1/identity/disable-two-factor":{"delete":{"operationId":"disable-two-factor","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DisableTwoFactorResponseBody"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Disable two-factor authentication","tags":["Identity"]}},"/v1/identity/enable-two-factor":{"post":{"operationId":"enable-two-factor","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnableTwoFactorRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnableTwoFactorResponseBody"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Enable two-factor authentication after setup","tags":["Identity"]}},"/v1/identity/forgot-password":{"post":{"operationId":"forgot-password","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordRequestBody"}}},"required":true},"responses":{"204":{"description":"No Content"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Initiate password reset process","tags":["Identity"]}},"/v1/identity/me":{"get":{"operationId":"get-session","parameters":[{"description":"The session cookie","in":"cookie","name":"session","schema":{"description":"The session cookie","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeResponseBody"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Get current user session","tags":["Identity"]}},"/v1/identity/refresh-session":{"post":{"operationId":"refresh-session","parameters":[{"description":"The refresh token cookie","in":"cookie","name":"refresh_token","schema":{"description":"The refresh token cookie","type":"string"}}],"responses":{"204":{"description":"No Content","headers":{"Domain":{"schema":{"type":"string"}},"Expires":{"schema":{"type":"string"}},"HttpOnly":{"schema":{"type":"boolean"}},"MaxAge":{"schema":{"format":"int64","type":"integer"}},"Name":{"schema":{"type":"string"}},"Partitioned":{"schema":{"type":"boolean"}},"Path":{"schema":{"type":"string"}},"Quoted":{"schema":{"type":"boolean"}},"Raw":{"schema":{"type":"string"}},"RawExpires":{"schema":{"type":"string"}},"SameSite":{"schema":{"format":"int64","type":"integer"}},"Secure":{"schema":{"type":"boolean"}},"Set-Cookie":{"schema":{"type":"string"}},"Unparsed":{"schema":{"type":"string"}},"Value":{"schema":{"type":"string"}}}},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Extend current session validity","tags":["Identity"]}},"/v1/identity/regenerate-qr-code":{"post":{"operationId":"regenerate-qr-code","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegenerateQRCodeResponseBody"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Regenerate QR code for existing two-factor authentication setup","tags":["Identity"]}},"/v1/identity/reset-password":{"post":{"operationId":"reset-password","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequestBody"}}},"required":true},"responses":{"204":{"description":"No Content"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Complete password reset process","tags":["Identity"]}},"/v1/identity/sessions":{"delete":{"operationId":"delete-all-sessions","parameters":[{"description":"The session cookie","in":"cookie","name":"session","schema":{"description":"The session cookie","type":"string"}}],"responses":{"204":{"description":"No Content"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Terminate all active sessions","tags":["Identity"]},"get":{"operationId":"get-all-sessions","parameters":[{"description":"The session cookie","in":"cookie","name":"session","schema":{"description":"The session cookie","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetAllSessionsResponseBody"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Fetch all active sessions","tags":["Identity"]}},"/v1/identity/sessions/{id}":{"delete":{"operationId":"delete-session","parameters":[{"description":"The session cookie","in":"cookie","name":"session","schema":{"description":"The session cookie","type":"string"}},{"description":"The session id","in":"path","name":"id","required":true,"schema":{"description":"The session id","type":"string"}}],"responses":{"204":{"description":"No Content"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Terminate session by id","tags":["Identity"]}},"/v1/identity/setup-two-factor":{"post":{"operationId":"setup-two-factor","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetupTwoFactorResponseBody"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Setup two-factor authentication","tags":["Identity"]}},"/v1/identity/sign-in":{"post":{"operationId":"sign-in","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInResponseBody"}}},"description":"OK","headers":{"Domain":{"schema":{"type":"string"}},"Expires":{"schema":{"type":"string"}},"HttpOnly":{"schema":{"type":"boolean"}},"MaxAge":{"schema":{"format":"int64","type":"integer"}},"Name":{"schema":{"type":"string"}},"Partitioned":{"schema":{"type":"boolean"}},"Path":{"schema":{"type":"string"}},"Quoted":{"schema":{"type":"boolean"}},"Raw":{"schema":{"type":"string"}},"RawExpires":{"schema":{"type":"string"}},"SameSite":{"schema":{"format":"int64","type":"integer"}},"Secure":{"schema":{"type":"boolean"}},"Set-Cookie":{"schema":{"type":"string"}},"Unparsed":{"schema":{"type":"string"}},"Value":{"schema":{"type":"string"}}}},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Authenticate and create a new session","tags":["Identity"]}},"/v1/identity/sign-out":{"delete":{"operationId":"sign-out","parameters":[{"description":"The session cookie","in":"cookie","name":"session","schema":{"description":"The session cookie","type":"string"}}],"responses":{"204":{"description":"No Content","headers":{"Domain":{"schema":{"type":"string"}},"Expires":{"schema":{"type":"string"}},"HttpOnly":{"schema":{"type":"boolean"}},"MaxAge":{"schema":{"format":"int64","type":"integer"}},"Name":{"schema":{"type":"string"}},"Partitioned":{"schema":{"type":"boolean"}},"Path":{"schema":{"type":"string"}},"Quoted":{"schema":{"type":"boolean"}},"Raw":{"schema":{"type":"string"}},"RawExpires":{"schema":{"type":"string"}},"SameSite":{"schema":{"format":"int64","type":"integer"}},"Secure":{"schema":{"type":"boolean"}},"Set-Cookie":{"schema":{"type":"string"}},"Unparsed":{"schema":{"type":"string"}},"Value":{"schema":{"type":"string"}}}},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Terminate current session","tags":["Identity"]}},"/v1/identity/sign-up":{"post":{"operationId":"sign-up","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpRequestBody"}}},"required":true},"responses":{"204":{"description":"No Content"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Create a new user account","tags":["Identity"]}},"/v1/identity/update-password":{"post":{"operationId":"update-password","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePasswordRequestBody"}}},"required":true},"responses":{"204":{"description":"No Content"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Update user password","tags":["Identity"]}},"/v1/identity/verify-email":{"post":{"operationId":"verify-email","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyEmailRequestBody"}}},"required":true},"responses":{"204":{"description":"No Content"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Confirm user email address","tags":["Identity"]}},"/v1/identity/verify-password":{"post":{"operationId":"verify-password","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyPasswordRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyPasswordResponseBody"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Verify current password for sensitive operations","tags":["Identity"]}},"/v1/identity/verify-two-factor":{"post":{"operationId":"verify-two-factor","parameters":[{"description":"The session cookie","in":"cookie","name":"session","schema":{"description":"The session cookie","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyTwoFactorRequestBody"}}},"required":true},"responses":{"204":{"description":"No Content","headers":{"Domain":{"schema":{"type":"string"}},"Expires":{"schema":{"type":"string"}},"HttpOnly":{"schema":{"type":"boolean"}},"MaxAge":{"schema":{"format":"int64","type":"integer"}},"Name":{"schema":{"type":"string"}},"Partitioned":{"schema":{"type":"boolean"}},"Path":{"schema":{"type":"string"}},"Quoted":{"schema":{"type":"boolean"}},"Raw":{"schema":{"type":"string"}},"RawExpires":{"schema":{"type":"string"}},"SameSite":{"schema":{"format":"int64","type":"integer"}},"Secure":{"schema":{"type":"boolean"}},"Set-Cookie":{"schema":{"type":"string"}},"Unparsed":{"schema":{"type":"string"}},"Value":{"schema":{"type":"string"}}}},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Verify two-factor authentication code during sign-in","tags":["Identity"]}},"/v1/payments":{"get":{"description":"List payments with filtering options","operationId":"list-payments","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListPaymentsResponseBody"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"security":[{"API Key Authentication":[]}],"summary":"List payments","tags":["Payment"]},"post":{"description":"Create a new payment with idempotency support","operationId":"create-payment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Payment"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"security":[{"API Key Authentication":[]}],"summary":"Create payment","tags":["Payment"]}},"/v1/payments/{payment_id}":{"get":{"description":"Get details of a specific payment","operationId":"get-payment","parameters":[{"description":"Payment ID","in":"path","name":"payment_id","required":true,"schema":{"description":"Payment ID","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Payment"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"security":[{"API Key Authentication":[]}],"summary":"Get payment details","tags":["Payment"]}},"/v1/payments/{payment_id}/status":{"patch":{"description":"Update payment status (webhook endpoint)","operationId":"update-payment-status","parameters":[{"description":"Payment ID","in":"path","name":"payment_id","required":true,"schema":{"description":"Payment ID","type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePaymentStatusRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Payment"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Update payment status","tags":["Payment"]}},"/v1/refunds":{"get":{"description":"List refunds with filtering options","operationId":"list-refunds","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListRefundsResponseBody"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"security":[{"API Key Authentication":[]}],"summary":"List refunds","tags":["Payment"]},"post":{"description":"Create a new refund with validation and idempotency support","operationId":"initiate-refund","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitiateRefundRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Refund"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"security":[{"API Key Authentication":[]}],"summary":"Initiate refund","tags":["Payment"]}},"/v1/refunds/{refund_id}":{"get":{"description":"Get details of a specific refund","operationId":"get-refund","parameters":[{"description":"Refund ID","in":"path","name":"refund_id","required":true,"schema":{"description":"Refund ID","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Refund"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"security":[{"API Key Authentication":[]}],"summary":"Get refund details","tags":["Payment"]}},"/v1/users/{id}":{"get":{"operationId":"get-user","parameters":[{"description":"The ID of the user. Use @me to refer to the current user.","example":"@me","in":"path","name":"id","required":true,"schema":{"description":"The ID of the user. Use @me to refer to the current user.","examples":["@me"],"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Get user","tags":["Identity"]},"put":{"operationId":"update-user","parameters":[{"description":"The ID of the user. Use @me to refer to the current user.","example":"@me","in":"path","name":"id","required":true,"schema":{"description":"The ID of the user. Use @me to refer to the current user.","examples":["@me"],"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRequestBody"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}},"description":"OK"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Update user","tags":["Identity"]}},"/v1/users/{id}/image":{"post":{"operationId":"update-user-image","parameters":[{"description":"The ID of the user. Use @me to refer to the current user.","example":"@me","in":"path","name":"id","required":true,"schema":{"description":"The ID of the user. Use @me to refer to the current user.","examples":["@me"],"type":"string"}},{"description":"The original file name.","in":"header","name":"X-File-Name","required":true,"schema":{"description":"The original file name.","type":"string"}}],"requestBody":{"content":{"image/*":{"schema":{"contentMediaType":"application/octet-stream","format":"binary","type":"string"}}},"required":true},"responses":{"204":{"description":"No Content"},"429":{"$ref":"#/components/responses/TooManyRequests","description":"Too many requests - rate limit exceeded"}},"summary":"Update user profile image","tags":["Identity"]}}},"security":[],"servers":[{"description":"Production API","url":"http://localhost:3001"}],"tags":[{"description":"Identity \u0026 Access Management","name":"Identity"},{"description":"Payment Service","name":"Payment"}],"x-sdk-id":"v1"}